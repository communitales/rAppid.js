<?xml version="1.0"?>
<js:Application xmlns="http://www.w3.org/1999/xhtml"
                xmlns:js="js.core" xmlns:ui="js.ui" xmlns:conf="js.conf">

    <js:Imports>
        js.core.Base;
        js.core.Bindable;
        js.core.Content;
    </js:Imports>

    <js:Script>
        <![CDATA[
        (function (Base, Bindable, Content) {
            return {
                _defaults:{

                },
                /**
                 * Initializes the app
                 * this method is called right after the script tag is evaluated
                 */
                initialize:function () {

                    var Person = Bindable.inherit({
                        fullName:function () {
                            return this.$.firstname + " " + this.$.lastname;
                        }.on('firstname', 'lastname'),
                        gender:function () {
                            return (this.$.isMale) ? 'male' : 'female';
                        }.on('isMale'),
                        hasInterests:function () {
                            return (this.$.interests && this.$.interests.length > 0);
                        }.on("interests")
                    });

                    var I18n = Bindable.inherit({
                        translate: function(key, name){
                            if(this.$.language == "DE"){
                                return "Hallo " + name;
                            }else{
                                return "Hello " + name;
                            }
                        }.on('language')
                    });


                    // let's create a person
                    var person = new Person({
                        firstname:'Tony',
                        lastname:'Findeisen',
                        username:'it-tony',
                        isMale:true,
                        interests:['programming'],
                        comment:'rappid is awesome'
                    });

                    var i18n = new I18n({
                        language: 'DE'
                    });

                    this.set('languages', ['DE','EN']);

                    this.set('i18n',i18n);

                    this.set('interests', ['programming', 'sports', 'chilling']);

                    this.set('paymentMethods', ['bar', 'visa', 'credit card']);
                    this.set('person', person);
                    this.set('progress', "40%");

                    this.set('success', "he");
                    this.set('btnType', "success");
                    this.set('btnLabel', "wait");
                    this.set('page', 0);
                    this.set('pages', ['page 1', 'page 2', 'page 3', 'page 4']);
                    this.set('inputValue', 'text');
                    this.set('isChecked', true);


                },
                onButtonClick:function (e, caller) {
                    console.log("clicked " + caller.get('label'));
                },
                /**
                 * This method should be called from outside to start the application
                 */
                start:function () {
                    var self = this;

                    setTimeout(function () {
                        self.set("btnType", "info");
                        // self.set('page', (self.$.page + 1) % 4);
                    }, 2000);

                    setInterval(function () {
                        var p = parseInt(self.$.progress);
                        self.set("progress", ((p >= 100) ? 0 : p + 10) + "%");
                    }, 400);

                    this.render(document.body);
                }
            }
        })
        ]]>
    </js:Script>
    <div class="container">
        <div>
            <br/>
            <h1>UI Components</h1>
            <br/>
            <ui:TabView selectedIndex="0">
                <ui:View title="Buttons">
                    <h2>Simple Text and Icon Buttons</h2>
                    <div class="btn-toolbar">
                        <ui:Button disabled="false" label="Button without Icon" type="{btnType}"
                                   onclick="onButtonClick"/>
                        <ui:Button iconClass="icon-refresh" label="Button with Icon" onclick="onButtonClick"/>
                        <ui:Button iconClass="icon-plus" label="Button with Icon on the right"
                                   onclick="onButtonClick">
                            <js:Template name="layout">
                                {label}
                                <ui:PlaceHolder name="icon"/>
                            </js:Template>
                        </ui:Button>
                        <ui:Button iconClass="icon-refresh" onclick="onButtonClick"/>
                    </div>
                    <h2>Toggle Buttons</h2>
                    <div class="btn-toolbar">
                        <div class="pull-left">
                            <ui:Button label="Toggle Button" onclick="onButtonClick" selectable="true"/>
                        </div>
                        <ui:SelectionView tagName="div" class="btn-group" multiSelect="false"
                                          needsSelection="{hasSelection}">
                            <ui:Button label="1"/>
                            <ui:Button label="2"/>
                            <ui:Button label="3"/>
                            <ui:Button label="4"/>
                            <ui:Button label="{i18n.translate(btnlabel,{person.firstname})}"/>
                        </ui:SelectionView>

                    </div>
                    <h2>Menu and Split Buttons</h2>
                    <div class="btn-toolbar">
                        <ui:MenuButton type="success" label="MenuButton w/o Icon"/>
                        <ui:MenuButton type="success" iconClass="icon-plus icon-white" label="MenuButton with Icon">
                            <js:Content ref="menu">
                                <div class="">
                                    My Menu!
                                </div>
                            </js:Content>
                        </ui:MenuButton>
                        <ui:MenuButton type="{btnType}" iconClass="icon-plus icon-white" label="MenuButton with Icon">
                            <js:Content ref="menu">
                                <ul>
                                    <li>
                                        <ui:Link label="Menu Item 1"/>
                                    </li>
                                    <li>
                                        <ui:Link label="Menu Item 2"/>
                                    </li>
                                </ul>
                                <div class="">What up?</div>
                            </js:Content>
                        </ui:MenuButton>
                        <ui:SplitButton onclick="onButtonClick" type="{btnType}" iconClass="icon-plus icon-white" label="MenuButton with Icon">
                            <js:Content ref="menu">
                                <ul>
                                    <li>
                                        <ui:Link label="Menu Item 1"/>
                                    </li>
                                    <li>
                                        <ui:Link label="Menu Item 2"/>
                                    </li>
                                </ul>
                                <div class="">What up?</div>
                            </js:Content>
                        </ui:SplitButton>
                    </div>
                </ui:View>
                <ui:View title="Form Elements">
                    <h2>Form Elements</h2>
                    <div class="row">
                        <div class="span5">
                            <label for="firstname">Firstname</label>
                            <input id="firstname" type="text" value="{{person.firstname}}"/>
                            <label for="lastname">Lastname</label>
                            <input id="lastname" type="text" value="{{person.lastname}}"/>
                            <label>
                                <input type="checkbox" name="isMale" value="1" checked="{{person.isMale}}"/>Is Male
                            </label>
                            <!-- CHECKBOX SELECTION VIEW WITH LABELS-->
                            <ui:SelectionView multiSelect="true" items="{interests}"
                                              selectedItems="{{person.interests}}" forceSelectable="false">
                                <js:Template name="item">
                                    <label class="checkbox inline" data-selected="{{selected}}">
                                        <input type="checkbox" name="interests" value="1" checked="{{data-selected}}"/>
                                        {$item}
                                    </label>
                                </js:Template>
                            </ui:SelectionView>
                            <!-- SIMPLE MULTI SELECT ELEMENT WITH BINDING -->
                            <div>
                                <select items="{interests}" multiSelect="true" selectedItems="{{person.interests}}">
                                    <option>No Interests</option>
                                    <js:Template name="item">
                                        <option value="{$item}">{$item}</option>
                                    </js:Template>
                                </select>
                            </div>
                            <!-- RADIO BOX SELECTION VIEW WITH LABELS-->
                            <ui:SelectionView multiSelect="false" items="{paymentMethods}"
                                              selectedItem="{{person.paymentMethod}}" forceSelectable="false">
                                <js:Template name="item">
                                    <label class="radio inline" data-selected="{{selected}}">
                                        <input type="radio" name="paymentMethod" value="{$item}" checked="{{data-selected}}"/>{$item}
                                    </label>
                                </js:Template>
                            </ui:SelectionView>
                            <!-- SIMPLE SELECT ELEMENT WITH BINDING -->
                            <div>
                                <select items="{languages}" selectedItem="{{i18n.language}}">
                                    <js:Template name="item">
                                        <option value="{$item}">{$item}</option>
                                    </js:Template>
                                </select>
                            </div>
                            <div>
                                <select items="{paymentMethods}" selectedItem="{{person.paymentMethod}}">
                                    <option>No method</option>
                                    <js:Template name="item">
                                        <option value="{$item}">{$item}</option>
                                    </js:Template>
                                </select>
                            </div>
                            <!-- TEXT AREA -->
                            <div>
                                <textarea rows="3" cols="4">
                                    {{person.comment}}
                                </textarea>
                            </div>
                        </div>
                        <div class="span5">
                            <div class="row">
                                <label class="span2">Fullname</label>

                                <ui:Button label="{i18n.translate(name,{person.firstname})}"/>
                                <ui:Button label="{person.firstname}"/>
                            </div>
                            <div class="row">
                                <label class="span2">Gender</label>
                                <span>{person.gender}</span>
                            </div>
                            <div class="row">
                                <label class="span2">Interests</label>
                                <ui:ItemsView items="{person.interests}" tagName="ul" visible="{person.hasInterests}"
                                              class="span3">
                                    <js:Template name="item">
                                        <li>{$item}</li>
                                    </js:Template>
                                </ui:ItemsView>
                                <span hidden="{person.hasInterests}">Peron has no interests</span>
                            </div>
                            <div class="row">
                                <label class="span2">Payment</label>
                                <span>{person.paymentMethod}</span>
                            </div>
                            <div class="row">
                                <label class="span2">Comment</label>
                                <span>{person.comment}</span>
                            </div>
                        </div>
                    </div>
                </ui:View>
            </ui:TabView>
            <h2>Selection Views</h2>
            <div class="row">
                <div class="span3">
                    <h4>Single Select</h4>
                    <ui:SelectionView tagName="ul" class="nav nav-pills nav-stacked" multiSelect="false"
                                      needsSelection="true">
                        <li>
                            <ui:Link label="Item 1" href="#item1"/>
                        </li>
                        <li>
                            <ui:Link label="Item 2" href="#item2"/>
                        </li>
                        <li>
                            <ui:Link label="Item 3" href="#item3"/>
                        </li>
                        <li>
                            <ui:Link label="Item 4" href="#item4"/>
                        </li>
                    </ui:SelectionView>
                </div>
                <div class="span3">
                    <h4>Multi Select</h4>
                    <ui:SelectionView tagName="ul" class="nav nav-pills nav-stacked" multiSelect="true">
                        <li>
                            <ui:Link label="Item 1" href="#item1"/>
                        </li>
                        <li>
                            <ui:Link label="Item 2" href="#item2"/>
                        </li>
                        <li>
                            <ui:Link label="Item 3" href="#item3"/>
                        </li>
                        <li>
                            <ui:Link label="Item 4" href="#item4"/>
                        </li>
                    </ui:SelectionView>
                </div>
                <div class="span3">
                    <h4>Toggle Buttons Select</h4>
                </div>
            </div>
            <h2>Segmented Views</h2>
            <div class="row">
                <div class="span5">
                    <ui:SegmentedView visibleIndex="{page}">
                        <ui:View>View 1</ui:View>
                        <ui:View>View 2</ui:View>
                        <ui:View>View 3</ui:View>
                        <ui:View>View 4</ui:View>
                    </ui:SegmentedView>
                </div>
                <div class="span5">
                    <ui:SegmentedView items="{pages}" visibleIndex="{page}">
                        <js:Template name="item">
                            <ui:View>{$item}</ui:View>
                        </js:Template>
                    </ui:SegmentedView>
                </div>
            </div>
            <h2>Tab Views</h2>
            <div class="row">
                <div class="span5">
                    <ui:TabView>
                        <ui:View title="Tab 1">View 1</ui:View>
                        <ui:View title="Tab 2">View 2</ui:View>
                        <ui:View title="Tab 3">View 3</ui:View>
                        <ui:View title="Tab 4">View 4</ui:View>
                    </ui:TabView>
                </div>
                <div class="span5">
                    <ui:TabView items="{pages}" tabClassName="nav nav-pills" selectedIndex="2">
                        <js:Template name="item">
                            <ui:View title="{$item}">Whats Up on {$item} ??</ui:View>
                        </js:Template>
                    </ui:TabView>
                </div>
            </div>

            <!--<h2>Other useful Components</h2>-->
            <!--<div class="row">-->
                <!--<div class="progress progress-dange progress-striped active">-->
                    <!--<div class="bar" width="{progress}"/>-->
                <!--</div>-->
            <!--</div>-->
            <!--<div class="row" data-page="0">-->
                <!--<ui:ScrollableView width="300" height="100" selectedPage="{data-page}">-->
                    <!--<ui:ItemsView items="{pages}" width="1200">-->
                        <!--<js:Template name="item">-->
                            <!--<div width="300" style="display: inline-block; width: 300px;">{$item}</div>-->
                        <!--</js:Template>-->
                    <!--</ui:ItemsView>-->
                <!--</ui:ScrollableView>-->
                <!--<ui:SelectionView items="{pages}" selectedIndex="{{data-page}}">-->
                    <!--<js:Template name="item">-->
                        <!--<ui:Button label="{$item}"/>-->
                    <!--</js:Template>-->
                <!--</ui:SelectionView>-->
            <!--</div>-->
        </div>
    </div>
</js:Application>